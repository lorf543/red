{% load poll_extras %}
<div class="notification-item px-4 py-3 hover:bg-base-200 transition-colors duration-200 cursor-pointer
            {% if not notification.read %}bg-primary/5 border-l-2 border-l-primary{% endif %}"

     hx-target="this"
     hx-swap="outerHTML">
  
  <a href="{% url 'notification_redirect' notification.id %}" class="flex gap-3 items-start">
    <!-- Avatar del actor -->
    <div class="flex-shrink-0">
      {% if notification.actor.profile.profile_picture %}
        <img src="{{ notification.actor.profile.profile_picture.url|force_https }}" 
             alt="{{ notification.actor.username }}"
             class="w-10 h-10 rounded-full object-cover border-2 border-base-300">
      {% else %}
        <div class="w-10 h-10 rounded-full bg-primary text-primary-content flex items-center justify-center font-bold text-sm border-2 border-base-300">
          {{ notification.actor.profile.get_profile_initials }}
        </div>
      {% endif %}
    </div>

    <!-- Contenido -->
    <div class="flex-1 min-w-0">
      <div class="flex items-start justify-between gap-2">
        <div class="flex-1">
          <p class="text-sm">
            <span class="font-semibold text-primary">{{ notification.actor.username }}</span>
            <span class="text-base-content/70">{{ notification.verb }}</span>
          </p>
          
          {% if notification.get_comment_preview %}
            <p class="text-xs text-base-content/60 mt-1 line-clamp-2">
              "{{ notification.get_comment_preview }}"
            </p>
          {% endif %}
          
          <p class="text-xs text-base-content/50 mt-1">
            <i class="far fa-clock mr-1"></i>
            {{ notification.timestamp|timesince }} atr√°s
          </p>
        </div>

        {% if not notification.read %}
          <div class="flex-shrink-0">
            <div class="w-2 h-2 bg-primary rounded-full"></div>
          </div>
        {% endif %}
      </div>
    </div>
  </a>
</div>


