<!-- templates/subjects/partials/_subjects_table.html -->
<div class="overflow-x-auto">
    <table id="subjectsTable" class="min-w-full">
        <thead>
            <tr>
                <th scope="col" class="px-6 py-4 text-left text-sm font-semibold">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-book text-primary"></i>
                        <span>Materia</span>
                    </div>
                </th>
                <th scope="col" class="px-4 py-4 text-left text-sm font-semibold">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-chalkboard-teacher text-primary"></i>
                        <span>Profesor</span>
                    </div>
                </th>
                <th scope="col" class="px-4 py-4 text-center text-sm font-semibold">
                    <div class="flex items-center justify-center gap-2">
                        <i class="fas fa-desktop text-primary"></i>
                        <span>Modalidad</span>
                    </div>
                </th>
                <th scope="col" class="px-4 py-4 text-center text-sm font-semibold">
                    <div class="flex items-center justify-center gap-2">
                        <i class="fas fa-clock text-primary"></i>
                        <span>Horario</span>
                    </div>
                </th>
                <th scope="col" class="px-4 py-4 text-center">
                    <div class="header-column">
                        <span class="header-emoji">üöç</span>
                        <span class="header-text">Guagua</span>
                    </div>
                </th>
                <th scope="col" class="px-4 py-4 text-center">
                    <div class="header-column">
                        <span class="header-emoji">üî•</span>
                        <span class="header-text">Quemar</span>
                    </div>
                </th>
                <th scope="col" class="px-4 py-4 text-center">
                    <div class="header-column">
                        <span class="header-emoji">üìö</span>
                        <span class="header-text">Aprende</span>
                    </div>
                </th>
                <th scope="col" class="px-4 py-4 text-center">
                    <div class="header-column">
                        <span class="header-emoji">üò¥</span>
                        <span class="header-text">Vago</span>
                    </div>
                </th>
            </tr>
        </thead>
        <tbody class="divide-y divide-border">
            {% for subject in subjects %}
                <tr class="hover:bg-surface-hover transition-colors duration-200">
                    <td class="px-6 py-4">
                        <div class="subject-info">
                            <div class="font-medium text-base text-text">
                                {{ subject.name }}
                            </div>
                            {% if subject.description %}
                                <div class="text-sm text-muted mt-1 line-clamp-2">
                                    {{ subject.description|truncatewords:15 }}
                                </div>
                            {% endif %}
                            {% if subject.credits %}
                                <div class="text-xs text-muted mt-1">
                                    <i class="fas fa-graduation-cap text-xs mr-1"></i>
                                    {{ subject.credits }} cr√©dito{{ subject.credits|pluralize:"s" }}
                                </div>
                            {% endif %}
                        </div>
                    </td>
                    <td class="px-4 py-4">
                        {% if subject.teacher %}
                            <a href="{% url 'teacher_detail' subject.teacher.slug %}" 
                               class="teacher-link inline-block">
                                <div class="font-medium text-sm text-text hover:text-primary transition-colors">
                                    {{ subject.teacher.full_name }}
                                </div>
                                {% if subject.teacher.area %}
                                    <div class="text-xs text-muted mt-1">
                                        <i class="fas fa-building text-xs mr-1"></i>
                                        {{ subject.teacher.area }}
                                    </div>
                                {% endif %}
                            </a>
                        {% else %}
                            <span class="text-sm text-muted">Sin asignar</span>
                        {% endif %}
                    </td>
                    <td class="px-4 py-4 text-center">
                        {% if subject.modalidad %}
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium
                                {% if subject.modalidad == 'Presencial' %}
                                    bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200
                                {% else %}
                                    bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200
                                {% endif %}">
                                {% if subject.modalidad == 'Presencial' %}
                                    üè´ Presencial
                                {% else %}
                                    üíª Virtual
                                {% endif %}
                            </span>
                        {% else %}
                            <span class="text-sm text-muted">‚Äî</span>
                        {% endif %}
                    </td>
                    <td class="px-4 py-4 text-center">
                        <div class="text-sm text-text">
                            {% if subject.day and subject.hour %}
                                <div class="font-medium">{{ subject.get_day_display }}</div>
                                <div class="text-xs text-muted mt-1">{{ subject.hour }}</div>
                            {% else %}
                                <span class="text-muted">No especificado</span>
                            {% endif %}
                        </div>
                    </td>
                    <td class="px-4 py-4 text-center">
                        <div class="vote-badge badge-guagua mx-auto">
                            {{ subject.guagua_votes }}
                        </div>
                    </td>
                    <td class="px-4 py-4 text-center">
                        <div class="vote-badge badge-quemar mx-auto">
                            {{ subject.te_va_a_quemar_votes }}
                        </div>
                    </td>
                    <td class="px-4 py-4 text-center">
                        <div class="vote-badge badge-aprende mx-auto">
                            {{ subject.se_aprende_votes }}
                        </div>
                    </td>
                    <td class="px-4 py-4 text-center">
                        <div class="vote-badge badge-vago mx-auto">
                            {{ subject.vago_votes }}
                        </div>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="8" class="px-6 py-12 text-center">
                        <div class="empty-state flex flex-col items-center justify-center p-8 space-y-4">
                            <div class="empty-state-icon">
                                <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" 
                                          d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                </svg>
                            </div>
                            <div class="text-center">
                                {% if search_query %}
                                    <h3 class="text-lg font-semibold text-text mb-1">
                                        No se encontraron resultados
                                    </h3>
                                    <p class="text-sm text-muted">
                                        No hay materias que coincidan con "{{ search_query }}"
                                    </p>
                                {% else %}
                                    <h3 class="text-lg font-semibold text-text mb-1">
                                        No hay materias registradas
                                    </h3>
                                    <p class="text-sm text-muted">
                                        Las materias aparecer√°n aqu√≠ una vez que sean agregadas al sistema
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Pagination -->
{% if is_paginated %}
<div class="mt-6 flex flex-col sm:flex-row justify-between items-center gap-4 px-6 pb-4">
    <!-- Info de p√°gina -->
    <div class="text-sm text-muted">
        Mostrando 
        <span class="font-medium text-text">{{ page_obj.start_index }}</span>
        a 
        <span class="font-medium text-text">{{ page_obj.end_index }}</span>
        de 
        <span class="font-medium text-text">{{ page_obj.paginator.count }}</span>
        resultados
    </div>
    
    <!-- Controles de paginaci√≥n -->
    <div class="flex gap-2">
        <ul class="pagination flex gap-2">
            {% if page_obj.has_previous %}
                <li>
                    <a hx-boost="true" href="?page={{ page_obj.previous_page_number }}&search={{ search_query }}&sort={{ sort_by }}&modalidad={{ modalidad_filter }}" 
                       class="px-3 py-2 border border-border rounded text-text hover:bg-surface-hover hover:text-primary transition-colors">
                        &laquo; Anterior
                    </a>
                </li>
            {% endif %}
            
            {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                    <li>
                        <span class="px-3 py-2 bg-primary text-primary-content rounded font-medium">
                            {{ num }}
                        </span>
                    </li>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                    <li>
                        <a hx-boost="true" href="?page={{ num }}&search={{ search_query }}&sort={{ sort_by }}&modalidad={{ modalidad_filter }}" 
                           class="px-3 py-2 border border-border rounded text-text hover:bg-surface-hover hover:text-primary transition-colors">
                            {{ num }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
            
            {% if page_obj.has_next %}
                <li>
                    <a hx-boost="true" href="?page={{ page_obj.next_page_number }}&search={{ search_query }}&sort={{ sort_by }}&modalidad={{ modalidad_filter }}" 
                       class="px-3 py-2 border border-border rounded text-text hover:bg-surface-hover hover:text-primary transition-colors">
                        Siguiente &raquo;
                    </a>
                </li>
            {% endif %}
        </ul>
    </div>
</div>
{% endif %}